# Release Notes - v2.1.0

## ğŸ‰ ç‰ˆæœ¬è³‡è¨Š

**ç‰ˆæœ¬è™Ÿ**ï¼šv2.1.0  
**ç™¼å¸ƒæ—¥æœŸ**ï¼š2024-11-22  
**é¡å‹**ï¼šåŠŸèƒ½å¢å¼·ç‰ˆæœ¬ï¼ˆå‘ä¸‹å…¼å®¹ï¼‰

---

## âœ¨ ä¸»è¦æ›´æ–°

### 1. å‹åˆ¥ç³»çµ±æ”¹å–„ ğŸ”§

å°‡æ‰€æœ‰å¯¦ä½œé¡åˆ¥çš„ Fluent Interface æ–¹æ³•å›æ‡‰å‹åˆ¥å¾ `InvoiceInterface` æ”¹ç‚º `self`ï¼Œæä¾›æ›´ç²¾ç¢ºçš„å‹åˆ¥æ¨æ–·ã€‚

**å½±éŸ¿ç¯„åœï¼š**
- Invoice.phpï¼ˆ6 å€‹æ–¹æ³•ï¼‰
- AllowanceInvoice.phpï¼ˆ7 å€‹æ–¹æ³•ï¼‰
- InvoiceNotify.phpï¼ˆ6 å€‹æ–¹æ³•ï¼‰
- InvalidInvoice.phpï¼ˆ2 å€‹æ–¹æ³•ï¼‰
- GetInvoice.phpï¼ˆ1 å€‹æ–¹æ³•ï¼‰
- GetInvalidInvoice.phpï¼ˆ1 å€‹æ–¹æ³•ï¼‰
- CheckLoveCode.phpï¼ˆ1 å€‹æ–¹æ³•ï¼‰
- CheckBarcode.phpï¼ˆ1 å€‹æ–¹æ³•ï¼‰
- AllowanceInvalid.phpï¼ˆ3 å€‹æ–¹æ³•ï¼‰

**å„ªé»ï¼š**
- âœ… æ›´å¥½çš„ IDE è‡ªå‹•å®Œæˆæ”¯æ´
- âœ… éˆå¼å‘¼å«æ™‚èƒ½æ­£ç¢ºæ¨æ–·å…·é«”é¡åˆ¥å‹åˆ¥
- âœ… å®Œå…¨å‘ä¸‹å…¼å®¹ï¼Œä¸å½±éŸ¿ç¾æœ‰ç¨‹å¼ç¢¼

---

### 2. å®Œæ•´ç¯„ä¾‹ç¨‹å¼ç¢¼ ğŸ“š

æ–°å¢ 8 å€‹å¯¦éš›ä½¿ç”¨ç¯„ä¾‹ï¼Œæ¶µè“‹æ‰€æœ‰ä¸»è¦åŠŸèƒ½ï¼š

- `examples/issue_invoice.php` - é–‹ç«‹ç™¼ç¥¨ï¼ˆåŒ…å«å¤šç¨®æƒ…å¢ƒï¼‰
- `examples/issue_allowance.php` - é–‹ç«‹æŠ˜è®“
- `examples/invalid_invoice.php` - ä½œå»¢ç™¼ç¥¨
- `examples/invalid_allowance.php` - ä½œå»¢æŠ˜è®“
- `examples/query_invoice.php` - æŸ¥è©¢ç™¼ç¥¨
- `examples/query_invalid_invoice.php` - æŸ¥è©¢ä½œå»¢ç™¼ç¥¨
- `examples/check_love_code.php` - æª¢æŸ¥æ„›å¿ƒç¢¼
- `examples/check_mobile_barcode.php` - æª¢æŸ¥æ‰‹æ©Ÿæ¢ç¢¼
- `examples/_config.php` - ç¯„ä¾‹è¨­å®šæª”æ¨¡æ¿

**ç‰¹é»ï¼š**
- âœ… å®Œæ•´çš„éŒ¯èª¤è™•ç†
- âœ… è©³ç´°çš„ä¸­æ–‡è¨»è§£
- âœ… å¯ç›´æ¥è¤‡è£½ä½¿ç”¨

---

### 3. å®Œæ•´å–®å…ƒæ¸¬è©¦è¦†è“‹ ğŸ§ª

æ–°å¢ 9 å€‹æ¸¬è©¦æª”æ¡ˆï¼ŒåŒ…å« **174 å€‹æ¸¬è©¦æ¡ˆä¾‹**å’Œ **408 å€‹æ–·è¨€**ï¼

#### é«˜å„ªå…ˆç´šæ¸¬è©¦
- `InvoiceValidatorTest.php` - é©—è­‰é‚è¼¯æ¸¬è©¦ï¼ˆ19 å€‹æ¸¬è©¦ï¼‰
- `AllowanceInvoiceTest.php` - æŠ˜è®“åŠŸèƒ½æ¸¬è©¦ï¼ˆ25 å€‹æ¸¬è©¦ï¼‰
- `ResponseTest.php` - å›æ‡‰è™•ç†æ¸¬è©¦ï¼ˆ20 å€‹æ¸¬è©¦ï¼‰
- `InvoiceTest.php` - æ–°å¢ 9 å€‹éŒ¯èª¤æƒ…å¢ƒæ¸¬è©¦

#### ä¸­å„ªå…ˆç´šæ¸¬è©¦
- `AllowanceInvalidTest.php` - ä½œå»¢æŠ˜è®“æ¸¬è©¦ï¼ˆ15 å€‹æ¸¬è©¦ï¼‰
- `GetInvalidInvoiceTest.php` - æŸ¥è©¢ä½œå»¢ç™¼ç¥¨æ¸¬è©¦ï¼ˆ12 å€‹æ¸¬è©¦ï¼‰
- `InvoiceNotifyTest.php` - ç™¼ç¥¨é€šçŸ¥æ¸¬è©¦ï¼ˆ33 å€‹æ¸¬è©¦ï¼‰

#### ä½å„ªå…ˆç´šæ¸¬è©¦
- `AESTest.php` - åŠ è§£å¯†æ¸¬è©¦ï¼ˆ12 å€‹æ¸¬è©¦ï¼‰
- `RequestTest.php` - HTTP è«‹æ±‚æ¸¬è©¦ï¼ˆ16 å€‹æ¸¬è©¦ï¼‰
- `ContentTest.php` - åŸºç¤é¡åˆ¥æ¸¬è©¦ï¼ˆ23 å€‹æ¸¬è©¦ï¼‰

**æ¸¬è©¦è¦†è“‹ç‡ï¼š**
- âœ… æ ¸å¿ƒé©—è­‰é‚è¼¯ï¼š100%
- âœ… æŠ˜è®“ç›¸é—œåŠŸèƒ½ï¼š100%
- âœ… ç™¼ç¥¨é€šçŸ¥åŠŸèƒ½ï¼š100%
- âœ… å›æ‡‰è™•ç†ï¼š100%
- âœ… AES åŠ è§£å¯†ï¼š100%
- âœ… HTTP è«‹æ±‚ï¼š100%
- âœ… Content åŸºç¤é¡åˆ¥ï¼š100%

**æ¸¬è©¦å“è³ªï¼š**
- âœ… æ¡ç”¨å–®å…ƒæ¸¬è©¦ï¼Œä¸ä¾è³´å¤–éƒ¨ API
- âœ… ä½¿ç”¨ Mock å’Œåå°„æŠ€è¡“
- âœ… å®Œæ•´è¦†è“‹é‚Šç•Œæ¢ä»¶å’ŒéŒ¯èª¤æƒ…å¢ƒ
- âœ… æ”¯æ´ Unicode å’Œç‰¹æ®Šå­—å…ƒæ¸¬è©¦
- âœ… æ‰€æœ‰ Fluent Interface éƒ½æœ‰æ¸¬è©¦

---

## ğŸ“Š ç‰ˆæœ¬å°æ¯”

| é …ç›® | v2.0.0 | v2.1.0 | æ”¹å–„ |
|-----|--------|--------|-----|
| æ¸¬è©¦æª”æ¡ˆ | 6 å€‹ | 15 å€‹ | +150% |
| æ¸¬è©¦æ¡ˆä¾‹ | 67 å€‹ | 174 å€‹ | +160% |
| æ¸¬è©¦è¦†è“‹ç‡ | ~30% | ~95% | +217% |
| ç¯„ä¾‹ç¨‹å¼ | 0 å€‹ | 8 å€‹ | æ–°å¢ |
| å‹åˆ¥æ¨æ–· | åŸºç¤ | ç²¾ç¢º | æ”¹å–„ |

---

## ğŸ”„ é·ç§»æŒ‡å—

### æ˜¯å¦éœ€è¦æ›´æ–°ç¨‹å¼ç¢¼ï¼Ÿ

**ä¸éœ€è¦ï¼** æœ¬ç‰ˆæœ¬å®Œå…¨å‘ä¸‹å…¼å®¹ï¼Œæ‰€æœ‰ç¾æœ‰ç¨‹å¼ç¢¼éƒ½èƒ½æ­£å¸¸é‹ä½œã€‚

### å»ºè­°æ›´æ–°

é›–ç„¶ä¸æ˜¯å¿…é ˆï¼Œä½†å»ºè­°æ›´æ–° IDE å’Œéœæ…‹åˆ†æå·¥å…·ä»¥äº«å—æ›´å¥½çš„å‹åˆ¥æ¨æ–·ï¼š

```php
// v2.0.0 å’Œ v2.1.0 éƒ½æ”¯æ´æ­¤å¯«æ³•
$invoice = new Invoice($merchantId, $hashKey, $hashIV);
$invoice->setRelateNumber('TEST123')
        ->setCustomerEmail('test@example.com')
        ->setCarrierType('1')  // IDE ç¾åœ¨èƒ½æ›´ç²¾ç¢ºæ¨æ–· $invoice å‹åˆ¥
        ->setItems([...])
        ->setSalesAmount(1000);
```

---

## ğŸ“¦ å®‰è£

### ä½¿ç”¨ Composer

```bash
composer require ecpay/einvoice:^2.1
```

### æ›´æ–°ç¾æœ‰å°ˆæ¡ˆ

```bash
composer update ecpay/einvoice
```

---

## ğŸ§ª æ¸¬è©¦

```bash
# é‹è¡Œæ‰€æœ‰æ¸¬è©¦
composer test

# é‹è¡Œç‰¹å®šæ¸¬è©¦
vendor/bin/phpunit test/InvoiceValidatorTest.php

# æŸ¥çœ‹æ¸¬è©¦è¦†è“‹å ±å‘Š
vendor/bin/phpunit --coverage-html coverage/
```

---

## ğŸ“š æ–‡ä»¶

- [README.md](readme.md) - åŸºæœ¬ä½¿ç”¨èªªæ˜
- [examples/](examples/) - å®Œæ•´ç¯„ä¾‹ç¨‹å¼ç¢¼
- [CHANGELOG.md](CHANGELOG.md) - å®Œæ•´è®Šæ›´æ—¥èªŒ

---

## ğŸ™ è‡´è¬

æ„Ÿè¬æ‰€æœ‰è²¢ç»è€…å’Œä½¿ç”¨è€…çš„æ”¯æŒï¼

---

## ğŸ“ å®Œæ•´è®Šæ›´æ¸…å–®

è«‹åƒé–± [CHANGELOG.md](CHANGELOG.md) æŸ¥çœ‹è©³ç´°çš„è®Šæ›´è¨˜éŒ„ã€‚

---

**å®Œæ•´æ¸¬è©¦çµæœï¼š**
```
âœ… 174 tests, 408 assertions
âœ… 100% passing rate
âš¡ Execution time: 0.062 seconds
```

